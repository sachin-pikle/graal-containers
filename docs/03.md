## App Native Executable

### Build the App Native Executable

You can use GraalVM Native Image to generate a native executable for this app. We have another shell script that uses multistage Docker build to build the app JAR, generate the app native executable and  ship the native executable in a separate runtime docker image.

```bash
./step1-ee.sh
```
If you are prompted to `docker login` to OCR, enter you OCR user and password.

**Note:** To use the GraalVM Community edition instead of the GraalVM Enterprise edition, use `./step1-ce.sh`.

Run this command to see the new docker image:

```bash
docker images -a
```
Here's the output of the command:
```
REPOSITORY                  TAG     IMAGE ID       CREATED       SIZE
jibber-ni-gvmee2130-jdk17   0.0.1   daa1a94f4104   2 hours ago   196MB
```

### Troubleshoot Native Image Build Errors

You may see this error while generating the native executable.

```
Image build request failed with exit status 137
```

Exit status 137 indicates an out of memory error. Try increasing the memory for Docker resource. On Mac, go to Docker Desktop >> Settings >> Resources. Increase the memory to 8 GB or higher.

***Credits: https://stackoverflow.com/questions/68148868/micronaut-cannot-build-native-image-graalvm***

![Docker Memory Settings](../images/docker-memory-settings.png)


### Run the App Native Executable

Comment the `jibber-jar-gvmee-jdk17:` section. Uncomment the `jibber-nibase` section and run the following command to run the app native executable.

```bash
docker-compose up --remove-orphans
```

This will now start the following version of the app, on port 8082:

* Native Executable (generated by Native Image) : http://localhost:8082/jibber

### Stop the App Native Executable

From another terminal window, run the following command:

```bash
docker-compose stop
```

[Back to Table of Contents](../README.md#table-of-contents)